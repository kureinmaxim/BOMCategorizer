# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–º–æ–¥–∑–∏ –∏ UTF-8 –≤ Windows –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è Python

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –≤—ã–≤–æ–¥–µ —ç–º–æ–¥–∑–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚úÖ üí° ‚ÑπÔ∏è) –≤ Windows –∫–æ–Ω—Å–æ–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:

```
UnicodeEncodeError: 'charmap' codec can't encode character '\u2705' in position 7: 
character maps to <undefined>
```

**–ü—Ä–∏—á–∏–Ω–∞:** Windows –∫–æ–Ω—Å–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∫—É cp1251, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Unicode-—Å–∏–º–≤–æ–ª—ã (—ç–º–æ–¥–∑–∏).

## –†–µ—à–µ–Ω–∏–µ: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞

### –£—Ä–æ–≤–µ–Ω—å 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UTF-8 –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏

```python
import sys
import io

def setup_console_encoding():
    """–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫—É –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ —ç–º–æ–¥–∑–∏ –≤ Windows"""
    if sys.platform == 'win32':
        try:
            # –ü–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å UTF-8 –¥–ª—è stdout –∏ stderr
            if hasattr(sys.stdout, 'buffer'):
                sys.stdout = io.TextIOWrapper(
                    sys.stdout.buffer, 
                    encoding='utf-8', 
                    errors='replace'
                )
            if hasattr(sys.stderr, 'buffer'):
                sys.stderr = io.TextIOWrapper(
                    sys.stderr.buffer, 
                    encoding='utf-8', 
                    errors='replace'
                )
        except Exception:
            pass  # –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ UTF-8

# –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞
setup_console_encoding()
```

### –£—Ä–æ–≤–µ–Ω—å 2: –ö–ª–∞—Å—Å —ç–º–æ–¥–∑–∏

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —ç–º–æ–¥–∑–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞:

```python
class Emoji:
    """–≠–º–æ–¥–∑–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞"""
    CHECK = '‚úÖ'
    INFO = '‚ÑπÔ∏è'
    WARN = 'üí°'
    ERROR = '‚ùå'
    SYNC = 'üîÑ'
    ARROW = '‚Üí'
```

### –£—Ä–æ–≤–µ–Ω—å 3: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Å fallback

```python
def safe_print(text):
    """
    –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —ç–º–æ–¥–∑–∏.
    –ï—Å–ª–∏ —ç–º–æ–¥–∑–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è, –∑–∞–º–µ–Ω—è–µ—Ç –∏—Ö –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã.
    """
    try:
        print(text)
    except UnicodeEncodeError:
        # Fallback: –∑–∞–º–µ–Ω—è–µ–º —ç–º–æ–¥–∑–∏ –Ω–∞ —Ç–µ–∫—Å—Ç
        fallback_text = text.replace(Emoji.CHECK, '[OK]')
        fallback_text = fallback_text.replace(Emoji.INFO, '[INFO]')
        fallback_text = fallback_text.replace(Emoji.WARN, '[WARN]')
        fallback_text = fallback_text.replace(Emoji.ERROR, '[ERROR]')
        fallback_text = fallback_text.replace(Emoji.SYNC, '[SYNC]')
        fallback_text = fallback_text.replace(Emoji.ARROW, '->')
        print(fallback_text)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ `print()` –Ω–∞ `safe_print()` –≤ –º–µ—Å—Ç–∞—Ö, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —ç–º–æ–¥–∑–∏:

```python
# –í–º–µ—Å—Ç–æ:
print(f"{Colors.GREEN}‚úÖ {edition_name}: {old_version} ‚Üí {new_version}{Colors.NC}")

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
safe_print(f"{Colors.GREEN}{Emoji.CHECK} {edition_name}: {old_version} {Emoji.ARROW} {new_version}{Colors.NC}")
```

## –ë–æ–Ω—É—Å: UTF-8 –¥–ª—è subprocess

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ subprocess —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–¥–∏—Ä–æ–≤–∫–∏:

```python
result = subprocess.run(
    [sys.executable, 'script.py'],
    capture_output=True,
    text=True,
    encoding='utf-8',      # –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º UTF-8
    errors='replace',      # –ó–∞–º–µ–Ω—è–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
    check=False
)
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π –∑–∞—â–∏—Ç—ã:

```
‚úÖ Modern Edition: 4.3.1 ‚Üí 4.3.2
   –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 13.11.2025
   ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª: config_qt.json

‚úÖ –í–µ—Ä—Å–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ —à–∞–±–ª–æ–Ω–∞—Ö
‚ÑπÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é —Ñ–∞–π–ª—ã —Å–±–æ—Ä–∫–∏...

üîÑ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –§–ê–ô–õ–û–í –°–ë–û–†–ö–ò

‚ÑπÔ∏è Standard Edition:
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω: installer_clean.iss -> v3.3.0 (Standard)

‚ÑπÔ∏è Modern Edition:
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω: installer_qt.iss -> v4.3.2 (Modern Edition)

‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
‚ÑπÔ∏è –í–µ—Ä—Å–∏–∏ –≤ .iss —Ñ–∞–π–ª–∞—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —à–∞–±–ª–æ–Ω–∞–º config.
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

1. **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞**: –ï—Å–ª–∏ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, fallback –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç
2. **–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**: –ù–∞ Linux/macOS —ç–º–æ–¥–∑–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ä–∞–∑—É
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç —Å UnicodeEncodeError
4. **–£–¥–æ–±—Å—Ç–≤–æ**: –í—Å–µ —ç–º–æ–¥–∑–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (–∫–ª–∞—Å—Å Emoji)
5. **–ö—Ä–∞—Å–æ—Ç–∞**: PowerShell —É—Å–ø–µ—à–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–º–æ–¥–∑–∏!

## –§–∞–π–ª—ã —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

- `update_version.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å —ç–º–æ–¥–∑–∏
- `sync_installer_versions.py` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å —ç–º–æ–¥–∑–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —ç–º–æ–¥–∑–∏
python update_version.py status
python update_version.py set modern 4.3.1
python update_version.py sync
```

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

‚ö†Ô∏è **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```python
print("‚úÖ")  # –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å —Å UnicodeEncodeError
```

‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```python
safe_print(f"{Emoji.CHECK}")  # –í—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã —ç–º–æ–¥–∑–∏)

–ï—Å–ª–∏ —ç–º–æ–¥–∑–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã:

```python
print("[OK] –û–ø–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞")
print("[INFO] –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
print("[WARN] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ")
print("[ERROR] –û—à–∏–±–∫–∞")
```

–ù–æ —Å –Ω–∞—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∏ –∫—Ä–∞—Å–æ—Ç—É —ç–º–æ–¥–∑–∏, –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞! üéâ

